let bddReq,bddReqU;_4eb‍.x([["default",()=>_4eb‍.o]]);_4eb‍.w("../database/messDb",[["default",["bddReq"],function(v){bddReq=v}]]);_4eb‍.w("../database/userDb",[["default",["bddReqU"],function(v){bddReqU=v}]]);
 //recup du get by id pour verification du mots de passe



// =============================================================================
// connection base de donner get recup les messages par users
// =============================================================================

const getMess = async(req, res) => {


    const {id} = req.params;
    let result = await bddReq.getMessage(id);
    _4eb‍.g.console.log(result);
    const us = {messages:result.rows}
    const info = us.messages[0];
    _4eb‍.g.console.log(info);

    
    res.status(200).render('pages/userMessages' ,{result});

};


// =============================================================================
// isert message 
// =============================================================================

const inserMess = async(req,res) => {


    
    //----test si le password ---//
    const {id} = req.params;
    let result = await bddReqU.getUserId(id);
    const us = {users:result.rows}
    const info = us.users[0];
    // console.log(info.password);

    const {receiver,password,title,content} = req.body;

    if(info.password === password){

        await bddReq.insMessage(id,receiver,title,content);
        res.status(200).send('message ajouter avec success');
    }

    else{res.status(403).send(' le mode de passe ne corespond pas');}


};






_4eb‍.d({

    getMess,
    inserMess

    
    }); 