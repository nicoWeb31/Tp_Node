let Router,GlobalController,usersController,messController,passport;_0b5‍.x([["default",()=>_0b5‍.o]]);_0b5‍.w("express",[["Router",["Router"],function(v){Router=v}]]);_0b5‍.w("./controllers/GlobalController",[["default",["GlobalController"],function(v){GlobalController=v}]]);_0b5‍.w("./controllers/usersController",[["default",["usersController"],function(v){usersController=v}]]);_0b5‍.w("./controllers/messController",[["default",["messController"],function(v){messController=v}]]);_0b5‍.w("passport",[["default",["passport"],function(v){passport=v}]]);






const api = ({}) => {

    const routes = Router();

    //route du global controller
    routes.get( '/', GlobalController.acceuil);
    //routes.get('/test',GlobalController.test );

    //route du user controller
    routes.get('/users',passport.authenticationMiddleware(),usersController.getU );
    routes.get('/user/:id',passport.authenticationMiddleware(),usersController.getUserByID);
    routes.put('/users',passport.authenticationMiddleware(),usersController.inserUser);
    routes.delete("/user/:id",passport.authenticationMiddleware(), usersController.delUser);
    routes.post("/user/:id",passport.authenticationMiddleware(),usersController.modifUser);

    //route du message controller
    routes.get('/user/:id/messages',passport.authenticationMiddleware(),messController.getMess );
    routes.put('/user/:id/message',passport.authenticationMiddleware(),messController.inserMess);
    routes.delete('/user/message/:id',passport.authenticationMiddleware(),messController.deleteMessage);
    routes.post("/user/message/:id",passport.authenticationMiddleware(),messController.modifMessage);

    routes.get("/login",usersController.log);

    routes.post( '/login' , passport.authenticate( 'local', {
        successRedirect : '/users' ,
        failureRedirect : '/login'
        }));


    return routes;


};
_0b5‍.d(api);